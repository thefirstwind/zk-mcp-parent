# ğŸš€ DeepSeek API å¿«é€Ÿå¼€å§‹

## âœ… å½“å‰çŠ¶æ€

æ‰€æœ‰æŠ€æœ¯é—®é¢˜å·²ä¿®å¤ï¼åº”ç”¨å·²æ­£å¸¸è¿è¡Œï¼Œåªéœ€è®¾ç½® API Key å³å¯ä½¿ç”¨ã€‚

```
âœ… 404 é”™è¯¯ï¼ˆå·²ä¿®å¤ï¼‰
âœ… JSON ååºåˆ—åŒ–é”™è¯¯ï¼ˆå·²ä¿®å¤ï¼‰  
â³ API Keyï¼ˆéœ€è¦ä½ è®¾ç½®ï¼‰
```

---

## ğŸ“ 3 æ­¥å®Œæˆè®¾ç½®

### ç¬¬ 1 æ­¥ï¼šè·å– DeepSeek API Key

è®¿é—® https://platform.deepseek.com/ å¹¶åˆ›å»º API Keyï¼ˆæ ¼å¼ï¼š`sk-xxxxxxxxxxxxx`ï¼‰

### ç¬¬ 2 æ­¥ï¼šè®¾ç½®ç¯å¢ƒå˜é‡

```bash
export DEEPSEEK_API_KEY=sk-your-real-api-key-here
```

### ç¬¬ 3 æ­¥ï¼šé‡å¯åº”ç”¨

```bash
lsof -ti:8081 | xargs kill -9
mvn spring-boot:run
```

---

## âœ… éªŒè¯æ˜¯å¦å·¥ä½œ

è¿è¡ŒéªŒè¯è„šæœ¬ï¼š

```bash
./verify-fix.sh
```

é¢„æœŸçœ‹åˆ°ï¼š

```
ğŸŠ å®Œç¾ï¼æ‰€æœ‰é—®é¢˜éƒ½å·²è§£å†³ï¼Œç³»ç»Ÿæ­£å¸¸è¿è¡Œï¼
```

---

## ğŸ§ª æ‰‹åŠ¨æµ‹è¯•

### åˆ›å»ºä¼šè¯

```bash
curl -X POST http://localhost:8081/api/chat/session \
  -H "Content-Type: application/json" \
  -d '{"sessionName":"æˆ‘çš„ä¼šè¯"}'
```

### å‘é€æ¶ˆæ¯ï¼ˆæ›¿æ¢ä¸ºä½ çš„ä¼šè¯ IDï¼‰

```bash
curl -X POST http://localhost:8081/api/chat/session/YOUR-SESSION-ID/message \
  -H "Content-Type: application/json" \
  -d '{"message":"ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±"}'
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **[å®Œæ•´ä¿®å¤è¯´æ˜](DEEPSEEK_FIX_SUMMARY.md)** - è¯¦ç»†çš„é—®é¢˜åˆ†æ
- **[API è®¾ç½®æŒ‡å—](SETUP_DEEPSEEK_API.md)** - å„ç§ç¯å¢ƒçš„é…ç½®
- **[é›†æˆæ€»ç»“](DEEPSEEK_INTEGRATION.md)** - æŠ€æœ¯è¦ç‚¹

---

## ğŸ”§ å·²ä¿®å¤çš„æŠ€æœ¯é—®é¢˜

### é—®é¢˜ 1: 404 Not Found

**åŸå› **ï¼š`base-url` åŒ…å« `/v1` å¯¼è‡´è·¯å¾„é‡å¤

```yaml
# é”™è¯¯ âŒ
base-url: https://api.deepseek.com/v1
# å¯¼è‡´è¯·æ±‚: https://api.deepseek.com/v1/v1/chat/completions

# æ­£ç¡® âœ…  
base-url: https://api.deepseek.com
# æ­£ç¡®è¯·æ±‚: https://api.deepseek.com/v1/chat/completions
```

### é—®é¢˜ 2: JSON ååºåˆ—åŒ–é”™è¯¯

**åŸå› **ï¼šDeepSeek API è¿”å›é¢å¤–å­—æ®µï¼ˆ`prompt_tokens_details`ï¼‰

**è§£å†³**ï¼šé…ç½® Jackson å¿½ç•¥æœªçŸ¥å­—æ®µ

```yaml
spring:
  jackson:
    deserialization:
      fail-on-unknown-properties: false
```

---

## ğŸ’¡ æç¤º

- **æ°¸ä¹…è®¾ç½® API Key**ï¼ˆæ¨èï¼‰ï¼š
  ```bash
  echo 'export DEEPSEEK_API_KEY=sk-your-key' >> ~/.zshrc
  source ~/.zshrc
  ```

- **æŸ¥çœ‹æ—¥å¿—**ï¼š
  ```bash
  tail -f logs/mcp-ai-client.log
  ```

- **å¥åº·æ£€æŸ¥**ï¼š
  ```bash
  curl http://localhost:8081/actuator/health
  ```

---

**æœ€åæ›´æ–°**: 2025-10-23  
**çŠ¶æ€**: âœ… å¯ä»¥ä½¿ç”¨ï¼ˆéœ€è¦ API Keyï¼‰



